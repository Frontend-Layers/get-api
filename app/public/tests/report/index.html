<!doctype html>
<html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Mochawesome Report</title><link rel="stylesheet" href="assets\app.css"/></head><body data-raw="{&quot;stats&quot;:{&quot;suites&quot;:3,&quot;tests&quot;:9,&quot;passes&quot;:8,&quot;pending&quot;:0,&quot;failures&quot;:1,&quot;start&quot;:&quot;2025-01-22T22:32:42.879Z&quot;,&quot;end&quot;:&quot;2025-01-22T22:32:43.773Z&quot;,&quot;duration&quot;:894,&quot;testsRegistered&quot;:9,&quot;passPercent&quot;:88.88888888888889,&quot;pendingPercent&quot;:0,&quot;other&quot;:0,&quot;hasOther&quot;:false,&quot;skipped&quot;:0,&quot;hasSkipped&quot;:false},&quot;results&quot;:[{&quot;uuid&quot;:&quot;b0f0ffb6-17e5-41d8-a4ad-bc4440d4446a&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;cf6cdadc-8679-4cce-89f3-f3e42ffb869b&quot;,&quot;title&quot;:&quot;Weather API Tests&quot;,&quot;fullFile&quot;:&quot;W:\\home\\fel\\get-api\\app\\public\\tests\\test-api.mjs&quot;,&quot;file&quot;:&quot;\\app\\public\\tests\\test-api.mjs&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should fetch data from OpenWeather API&quot;,&quot;fullTitle&quot;:&quot;Weather API Tests should fetch data from OpenWeather API&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:143,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const serviceName = &#x27;OpenWeather&#x27;;\nconst query = &#x27;London&#x27;;\nconst result = await fetchData(serviceName, query);\nexpect(result).to.not.be.null;\nexpect(result).to.have.property(&#x27;name&#x27;);\nexpect(result.name).to.equal(query);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fc186175-b2be-4953-8262-326bf6d89b15&quot;,&quot;parentUUID&quot;:&quot;cf6cdadc-8679-4cce-89f3-f3e42ffb869b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should fetch data from WeatherAPI API&quot;,&quot;fullTitle&quot;:&quot;Weather API Tests should fetch data from WeatherAPI API&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:111,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const serviceName = &#x27;WeatherAPI&#x27;;\nconst query = &#x27;Paris&#x27;;\nconst result = await fetchData(serviceName, query);\nexpect(result).to.not.be.null;\nexpect(result).to.have.property(&#x27;location&#x27;);\nexpect(result.location.name).to.equal(query);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2a9c2d35-d04b-41fc-bf97-b06ebb43531f&quot;,&quot;parentUUID&quot;:&quot;cf6cdadc-8679-4cce-89f3-f3e42ffb869b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should fetch data from WeatherStack API&quot;,&quot;fullTitle&quot;:&quot;Weather API Tests should fetch data from WeatherStack API&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:354,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const serviceName = &#x27;WeatherStack&#x27;;\nconst query = &#x27;Berlin&#x27;;\nconst result = await fetchData(serviceName, query);\nexpect(result).to.not.be.null;\nexpect(result).to.have.property(&#x27;location&#x27;);\nexpect(result.location.name).to.equal(query);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0aafa25f-afb1-460e-9971-d606cc4be200&quot;,&quot;parentUUID&quot;:&quot;cf6cdadc-8679-4cce-89f3-f3e42ffb869b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should handle errors for invalid service name&quot;,&quot;fullTitle&quot;:&quot;Weather API Tests should handle errors for invalid service name&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const serviceName = &#x27;InvalidService&#x27;;\nconst query = &#x27;exampleQuery&#x27;;\nconst result = await fetchData(serviceName, query);\nexpect(result).to.be.null;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;79991482-e286-4324-9629-32a49ef16f0c&quot;,&quot;parentUUID&quot;:&quot;cf6cdadc-8679-4cce-89f3-f3e42ffb869b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should handle errors for missing API key&quot;,&quot;fullTitle&quot;:&quot;Weather API Tests should handle errors for missing API key&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:30,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const serviceName = &#x27;OpenWeather&#x27;;\nconst query = &#x27;London&#x27;;\nprocess.env.OPENWEATHER_API_KEY = &#x27;&#x27;;\nconst result = await fetchData(serviceName, query);\nexpect(result).to.be.null;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c0a97785-30f4-4a5f-85b5-3691817a591b&quot;,&quot;parentUUID&quot;:&quot;cf6cdadc-8679-4cce-89f3-f3e42ffb869b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;fc186175-b2be-4953-8262-326bf6d89b15&quot;,&quot;2a9c2d35-d04b-41fc-bf97-b06ebb43531f&quot;,&quot;0aafa25f-afb1-460e-9971-d606cc4be200&quot;,&quot;79991482-e286-4324-9629-32a49ef16f0c&quot;,&quot;c0a97785-30f4-4a5f-85b5-3691817a591b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:638,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;90453b6b-3521-4164-b6a8-97c1e8fd525c&quot;,&quot;title&quot;:&quot;combineJSONFiles&quot;,&quot;fullFile&quot;:&quot;W:\\home\\fel\\get-api\\app\\public\\tests\\test-json-utils.mjs&quot;,&quot;file&quot;:&quot;\\app\\public\\tests\\test-json-utils.mjs&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;combineJSONFiles\&quot;&quot;,&quot;fullTitle&quot;:&quot;combineJSONFiles \&quot;before all\&quot; hook in \&quot;combineJSONFiles\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// Create a unique name for the temporary directory using the current timestamp\ntestDataDir = path.join(__dirname, `test-data-${Date.now()}`);\noutputFile = path.join(testDataDir, &#x27;index.json&#x27;);\n// Create the temporary directory if it doesn&#x27;t exist\nif (!fs.existsSync(testDataDir)) {\n  fs.mkdirSync(testDataDir, { recursive: true });\n}\n// Create test JSON files in the temporary directory\nfs.writeFileSync(path.join(testDataDir, &#x27;file1.json&#x27;), JSON.stringify({ a: 1 }));\nfs.writeFileSync(path.join(testDataDir, &#x27;file2.json&#x27;), JSON.stringify({ b: 2 }));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2072c65c-af90-4af6-a054-343874840961&quot;,&quot;parentUUID&quot;:&quot;90453b6b-3521-4164-b6a8-97c1e8fd525c&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;combineJSONFiles\&quot;&quot;,&quot;fullTitle&quot;:&quot;combineJSONFiles \&quot;after all\&quot; hook in \&quot;combineJSONFiles\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// Clean up: delete the temporary files and directory\nif (fs.existsSync(path.join(testDataDir, &#x27;file1.json&#x27;))) {\n  fs.unlinkSync(path.join(testDataDir, &#x27;file1.json&#x27;));\n}\nif (fs.existsSync(path.join(testDataDir, &#x27;file2.json&#x27;))) {\n  fs.unlinkSync(path.join(testDataDir, &#x27;file2.json&#x27;));\n}\nif (fs.existsSync(outputFile)) {\n  fs.unlinkSync(outputFile);\n}\nif (fs.existsSync(testDataDir)) {\n  fs.rmdirSync(testDataDir);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e3124f6e-44d4-48c2-bef4-b40e2aa5a13c&quot;,&quot;parentUUID&quot;:&quot;90453b6b-3521-4164-b6a8-97c1e8fd525c&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should combine JSON files into index.json&quot;,&quot;fullTitle&quot;:&quot;combineJSONFiles should combine JSON files into index.json&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// Call the function to combine JSON files in the temporary directory\nawait combineJSONFiles(testDataDir, outputFile);\n// Check if the output file (index.json) was created\nexpect(fs.existsSync(outputFile)).to.be.true;\n// Read and parse the output file to verify its content\nconst combinedData = JSON.parse(fs.readFileSync(outputFile, &#x27;utf-8&#x27;));\n// Verify that the combined data matches the expected result\nexpect(combinedData).to.deep.equal({ a: 1, b: 2 });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;91740aa3-f735-41dd-bb87-dd379bd3ada0&quot;,&quot;parentUUID&quot;:&quot;90453b6b-3521-4164-b6a8-97c1e8fd525c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;91740aa3-f735-41dd-bb87-dd379bd3ada0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;77bdc1ad-62c7-43b7-aee2-0553d006c1b0&quot;,&quot;title&quot;:&quot;Text API Tests&quot;,&quot;fullFile&quot;:&quot;W:\\home\\fel\\get-api\\app\\public\\tests\\test-text-api.mjs&quot;,&quot;file&quot;:&quot;\\app\\public\\tests\\test-text-api.mjs&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should fetch data from TextGears API&quot;,&quot;fullTitle&quot;:&quot;Text API Tests should fetch data from TextGears API&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:127,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;const serviceName = &#x27;TextGears&#x27;;\nconst query = {\n  text: &#x27;This is a test sentence with a error.&#x27;,\n  language: &#x27;en-US&#x27;\n};\nconst result = await fetchData(serviceName, query);\nconsole.log(&#x27;TextGears API Response:&#x27;, result); // Логируем ответ для отладки\n// Проверяем, что результат не null\nexpect(result).to.not.be.null;\n// Проверяем, что ответ содержит статус и он true\nexpect(result).to.have.property(&#x27;status&#x27;);\nexpect(result.status).to.be.true;\n// Проверяем, что ответ содержит поле response и это объект\nexpect(result).to.have.property(&#x27;response&#x27;);\nexpect(result.response).to.be.an(&#x27;object&#x27;);\n// Проверяем, что response содержит массив errors\nexpect(result.response).to.have.property(&#x27;errors&#x27;);\nexpect(result.response.errors).to.be.an(&#x27;array&#x27;);\n// Проверяем, что errors содержит хотя бы одну ошибку\nif (result.response.errors.length &gt; 0) {\n  const firstError = result.response.errors[0];\n  expect(firstError).to.have.property(&#x27;id&#x27;);\n  expect(firstError).to.have.property(&#x27;bad&#x27;);\n  expect(firstError).to.have.property(&#x27;better&#x27;);\n  expect(firstError.better).to.be.an(&#x27;array&#x27;);\n}&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: expected null not to be null&quot;,&quot;estack&quot;:&quot;AssertionError: expected null not to be null\n    at Context.&lt;anonymous&gt; (file:///W:/home/fel/get-api/app/public/tests/test-text-api.mjs:19:29)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)&quot;},&quot;uuid&quot;:&quot;94bd0225-14c0-4e34-81ca-dc95bb22a5ef&quot;,&quot;parentUUID&quot;:&quot;77bdc1ad-62c7-43b7-aee2-0553d006c1b0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should handle errors for missing API key&quot;,&quot;fullTitle&quot;:&quot;Text API Tests should handle errors for missing API key&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:58,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const serviceName = &#x27;TextGears&#x27;;\nconst query = {\n  text: &#x27;This is a test sentence with a error.&#x27;,\n  language: &#x27;en-US&#x27;\n};\n// Сохраняем текущий API ключ\nconst originalApiKey = process.env.TEXTGEARS_API_KEY;\n// Удаляем API ключ из переменных окружения\ndelete process.env.TEXTGEARS_API_KEY;\nconst result = await fetchData(serviceName, query);\n// Восстанавливаем API ключ\nprocess.env.TEXTGEARS_API_KEY = originalApiKey;\n// Проверяем, что результат null (так как API ключ отсутствует)\nexpect(result).to.be.null;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;24773302-dfb3-471d-8359-8fbf7cd574fb&quot;,&quot;parentUUID&quot;:&quot;77bdc1ad-62c7-43b7-aee2-0553d006c1b0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should handle errors for invalid query&quot;,&quot;fullTitle&quot;:&quot;Text API Tests should handle errors for invalid query&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:57,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const serviceName = &#x27;TextGears&#x27;;\nconst query = {\n  text: &#x27;&#x27;, // Пустой текст\n  language: &#x27;en-US&#x27;\n};\nconst result = await fetchData(serviceName, query);\n// Проверяем, что результат null (так как запрос пустой)\nexpect(result).to.be.null;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ddddeed5-05e3-4ebe-a49f-5b27af09bc45&quot;,&quot;parentUUID&quot;:&quot;77bdc1ad-62c7-43b7-aee2-0553d006c1b0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;24773302-dfb3-471d-8359-8fbf7cd574fb&quot;,&quot;ddddeed5-05e3-4ebe-a49f-5b27af09bc45&quot;],&quot;failures&quot;:[&quot;94bd0225-14c0-4e34-81ca-dc95bb22a5ef&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:242,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000}],&quot;meta&quot;:{&quot;mocha&quot;:{&quot;version&quot;:&quot;11.0.1&quot;},&quot;mochawesome&quot;:{&quot;options&quot;:{&quot;quiet&quot;:true,&quot;reportFilename&quot;:&quot;index.html&quot;,&quot;saveHtml&quot;:true,&quot;saveJson&quot;:true,&quot;consoleReporter&quot;:&quot;spec&quot;,&quot;useInlineDiffs&quot;:false,&quot;code&quot;:true},&quot;version&quot;:&quot;7.1.3&quot;},&quot;marge&quot;:{&quot;options&quot;:{&quot;reportDir&quot;:&quot;./app/public/tests/report&quot;,&quot;reportFilename&quot;:&quot;index.html&quot;,&quot;quiet&quot;:&quot;true&quot;},&quot;version&quot;:&quot;6.2.0&quot;}}}" data-config="{&quot;reportFilename&quot;:&quot;index.html&quot;,&quot;reportDir&quot;:&quot;./app/public/tests/report&quot;,&quot;reportTitle&quot;:&quot;get-api&quot;,&quot;reportPageTitle&quot;:&quot;Mochawesome Report&quot;,&quot;inline&quot;:false,&quot;inlineAssets&quot;:false,&quot;cdn&quot;:false,&quot;charts&quot;:false,&quot;enableCharts&quot;:false,&quot;code&quot;:true,&quot;enableCode&quot;:true,&quot;autoOpen&quot;:false,&quot;overwrite&quot;:true,&quot;timestamp&quot;:false,&quot;ts&quot;:false,&quot;showPassed&quot;:true,&quot;showFailed&quot;:true,&quot;showPending&quot;:true,&quot;showSkipped&quot;:false,&quot;showHooks&quot;:&quot;failed&quot;,&quot;saveJson&quot;:true,&quot;saveHtml&quot;:true,&quot;dev&quot;:false,&quot;assetsDir&quot;:&quot;app\\public\\tests\\report\\assets&quot;,&quot;jsonFile&quot;:&quot;W:\\home\\fel\\get-api\\app\\public\\tests\\report\\index.json&quot;,&quot;htmlFile&quot;:&quot;W:\\home\\fel\\get-api\\app\\public\\tests\\report\\index.html&quot;}"><div id="report"></div><script src="assets\app.js"></script></body></html>